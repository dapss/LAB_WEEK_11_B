1. Code Handling Picture Storage Path
The code that determines where the temporary file is stored and generates the URI for the camera to use is located in ProviderFileManager.kt, specifically within the generatePhotoUri function.
fun generatePhotoUri(time: Long): FileInfo {
    val name = "img_$time.jpg"
    val file = File(
        context.getExternalFilesDir(fileHelper.getPicturesFolder()),
        name
    )
    return FileInfo(
        fileHelper.getUriFromFile(file),
        file,
        name,
        fileHelper.getPicturesFolder(),
        "image/jpeg"
    )
}

2. FileInfo Attributes
- URI (First Attribute): This refers to the FileProvider URI. It is a temporary, secure URI generated by FileProvider.getUriForFile. This URI allows external applications (like the Camera app) to access the file created inside your app's private storage directory without exposing the actual file path.
- relativePath (Fourth Attribute): This refers to the folder name/directory where the file belongs, such as Environment.DIRECTORY_PICTURES or Environment.DIRECTORY_MOVIES. It is used later when inserting the file into the MediaStore to organize it correctly within the device's gallery system.

3. [Bonus] Chronological Order of Photo Capture & Storage
- User Trigger: The user clicks the "Photo" button in MainActivity. The app checks for storage permissions.
- URI Generation: MainActivity calls openImageCapture(). This calls ProviderFileManager.generatePhotoUri(), which creates a temporary file in the app's external files directory and generates a secure FileProvider URI for it.
- Launch Camera: The takePictureLauncher is launched with this URI. The system Camera app opens, takes a picture, and saves the data directly to the URI provided.
- Result Callback: Once the user confirms the photo, the camera closes, and the takePictureLauncher callback in MainActivity is triggered with a success result.
- Insert to Store: The callback runs providerFileManager.insertImageToStore(photoInfo). This method prepares the ContentValues (name, MIME type, relative path) needed for the MediaStore.
- MediaStore Entry: insertToStore calls contentResolver.insert to create a new empty entry in the Android MediaStore (Gallery), returning a destination URI.
- Copy Data: Finally, the app opens an InputStream from the original temporary file (via FileProvider URI) and an OutputStream to the new MediaStore entry. It copies the byte data from the temporary file to the public MediaStore, making the photo visible in the Gallery.
